<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MyAnimeList hype visualization with D3.js | gilgi.org</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://gilgi.org/blog/mal-hype-ladder/">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'left' if you want left-aligned equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="gilgi">
<link rel="next" href="../biochemical-kinetics-reaction-velocities/" title="Fitting a Michaelis-Menten model to biochemical kinetics data" type="text/html">
<meta property="og:site_name" content="gilgi.org">
<meta property="og:title" content="MyAnimeList hype visualization with D3.js">
<meta property="og:url" content="https://gilgi.org/blog/mal-hype-ladder/">
<meta property="og:description" content="Everyone loves watching anime, but when there are so many shows airing it can be hard to keep track of what to watch and who's watching what. In this post, we'll use data from MyAnimeList to drive a c">
<meta property="og:image" content="https://gilgi.org/blog/mal-hype-ladder/images/blog/mal-hype-ladder.png">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-11-10T00:00:00-05:00">
<meta property="article:tag" content="anime">
<meta property="article:tag" content="API">
<meta property="article:tag" content="D3.js">
<meta property="article:tag" content="notebook">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="visualization">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://gilgi.org/">

            <span id="blog-title">gilgi.org</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../research/" class="nav-link">Research</a>
                </li>
<li class="nav-item">
<a href="../../code/" class="nav-link">Code</a>
                </li>
<li class="nav-item">
<a href="../" class="nav-link">Blog</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../archive/" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="http://status.gilgi.org" class="nav-link">Network Status</a>

                
            </li>
</ul>
<!-- Google custom search --><form method="get" action="https://www.google.com/search" class="navbar-form navbar-right" role="search" _lpchecked="1">
<input type="text" name="q" class="form-control" placeholder="Search"><input type="hidden" name="sitesearch" value="https://gilgi.org/">
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right">
<li class="nav-item">
    <a href="index.ipynb" id="sourcelink" class="nav-link">Source</a>
    </li>


                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">MyAnimeList hype visualization with D3.js</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    gilgi
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2017-11-10T00:00:00-05:00" itemprop="datePublished" title="2017-11-10">2017-11-10</time></a>
            </p>
                <p class="commentline">
        
    <a href="#disqus_thread" data-disqus-identifier="cache/posts/mal_hype_ladder.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="index.ipynb" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="../../images/blog/mal-hype-ladder.png" alt=""></p>
<p>Everyone loves watching anime, but when there are so many shows airing it can be hard to keep track of what to watch and who's watching what. In this post, we'll use data from <a href="https://myanimelist.net/">MyAnimeList</a> to drive a custom <a href="https://d3js.org/">D3.js</a> visualization showing the ratings and number of episodes watched for all our friends.</p>
<p><a href="https://colab.research.google.com/drive/0B1nL_8vlPlmWU1RfT3ZqT2FvOW8"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"></a></p>
<!-- TEASER_END -->

<p>Update: the mechanism this notebook uses to get data from MyAnimeList is out of date - stay tuned for a new-and-improved version of this visualization which will be based on the new <a href="https://jikan.moe/">Jikan API</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [0]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">xml.etree.ElementTree</span> <span class="k">as</span> <span class="nn">ET</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">math</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We will start off by specifying some date ranges that correspond to the four traditional yearly seasons of the anime calendar. We'll also list the MyAnimeList usernames of our friends:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [0]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">'%Y-%m-</span><span class="si">%d</span><span class="s1">'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [0]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">season_strings</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'2016-10-01'</span><span class="p">,</span> <span class="s1">'2017-01-01'</span><span class="p">,</span> <span class="s1">'2017-04-01'</span><span class="p">,</span> <span class="s1">'2017-07-01'</span><span class="p">,</span> <span class="s1">'2017-10-01'</span><span class="p">]</span>
<span class="n">season_dates</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">season_strings</span><span class="p">)</span>
<span class="n">season_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Fall 2016'</span><span class="p">,</span> <span class="s1">'Winter 2017'</span><span class="p">,</span> <span class="s1">'Spring 2017'</span><span class="p">,</span> <span class="s1">'Summer 2017'</span><span class="p">]</span>
<span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'thelolpatrol'</span><span class="p">,</span> <span class="s1">'gilgi'</span><span class="p">,</span> <span class="s1">'POOPOO88'</span><span class="p">,</span> <span class="s1">'lingybear'</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We'll be getting data out of MyAnimeList in an XML format from the <code>https://myanimelist.net/malappinfo.php</code> URL, which will allow us to get anime data for each of our friends. Here are a couple of functions which can help us get the XML data into a convenient Pandas DataFrame:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [0]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">xml2df</span><span class="p">(</span><span class="n">xml_data</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">(</span><span class="s1">'anime'</span><span class="p">,),</span> <span class="n">columns</span><span class="o">=</span><span class="p">(</span><span class="s1">'series_animedb_id'</span><span class="p">,</span> <span class="s1">'series_title'</span><span class="p">,</span> <span class="s1">'my_score'</span><span class="p">,</span> <span class="s1">'my_watched_episodes'</span><span class="p">,</span> <span class="s1">'series_episodes'</span><span class="p">,</span> <span class="s1">'series_start'</span><span class="p">),</span> <span class="n">types</span><span class="o">=</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">unicode</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">date</span><span class="p">)):</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">XML</span><span class="p">(</span><span class="n">xml_data</span><span class="p">)</span>
    <span class="n">all_records</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">record</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">subchild</span> <span class="ow">in</span> <span class="n">child</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">subchild</span><span class="o">.</span><span class="n">tag</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
                <span class="n">cast_fn</span> <span class="o">=</span> <span class="n">types</span><span class="p">[</span><span class="n">columns</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">subchild</span><span class="o">.</span><span class="n">tag</span><span class="p">)]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">record</span><span class="p">[</span><span class="n">subchild</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">cast_fn</span><span class="p">(</span><span class="n">subchild</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span> <span class="s1">'failed to decode'</span><span class="p">,</span> <span class="n">subchild</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="n">subchild</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">e</span>
        <span class="n">all_records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">all_records</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [0]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">make_df</span><span class="p">(</span><span class="n">user</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">xml2df</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'https://myanimelist.net/malappinfo.php?u=</span><span class="si">%s</span><span class="s1">&amp;status=all&amp;type=anime'</span> <span class="o">%</span> <span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">))</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">'season'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">series_start</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">season_dates</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">season_labels</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'my_score'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)]</span>
    <span class="c1">#df.set_index('series_animedb_id', inplace=True)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'my_score'</span><span class="p">:</span> <span class="s1">'score_</span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">user</span><span class="p">,</span> <span class="s1">'my_watched_episodes'</span><span class="p">:</span> <span class="s1">'watched_episodes_</span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">user</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [0]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">make_df</span><span class="p">,</span> <span class="n">users</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>failed to decode series_start 0000-00-00 time data '0000-00-00' does not match format '%Y-%m-%d'
failed to decode series_start 2018-07-00 time data '2018-07-00' does not match format '%Y-%m-%d'
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next up, we'll merge together the DataFrames for each user into one big DataFrame that we'll use to feed our visualization:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [0]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">joined</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'outer'</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">'series_animedb_id'</span><span class="p">,</span> <span class="s1">'series_title'</span><span class="p">,</span> <span class="s1">'series_episodes'</span><span class="p">,</span> <span class="s1">'series_start'</span><span class="p">,</span> <span class="s1">'season'</span><span class="p">]),</span> <span class="n">dfs</span><span class="p">)</span>
<span class="n">joined</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">'series_start'</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [0]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">titles</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">),</span> <span class="n">joined</span><span class="o">.</span><span class="n">series_title</span><span class="p">)</span>
<span class="n">seasons</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">joined</span><span class="o">.</span><span class="n">season</span><span class="p">)</span>
<span class="n">ids</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">joined</span><span class="o">.</span><span class="n">series_animedb_id</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">joined</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="s1">'watched_episodes_</span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">user</span><span class="p">)):</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">'title'</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="s1">'series_title'</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">),</span> <span class="s1">'score'</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="s1">'score_</span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">user</span><span class="p">),</span> <span class="s1">'watched'</span><span class="p">:</span> <span class="mi">7</span> <span class="o">*</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="s1">'watched_episodes_</span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">user</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="s1">'series_episodes'</span><span class="p">)),</span> <span class="s1">'user'</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span> <span class="s1">'id'</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="s1">'series_animedb_id'</span><span class="p">)})</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, here's the D3.js implementation of the anime visualization.</p>
<p>Most of this is pretty standard D3.js, but there are a few interesting things of note below:</p>
<ol>
<li>We'll use <a href="https://github.com/caged/d3-tip">d3-tip</a> to get nice tooltips for our visualization.</li>
<li>We will inject the data from our DataFrame directly into the <code>&lt;script&gt;</code> tag using <code>string.Template</code>. For a real web app we'd probably have our JS code request the data from some external source, but this will work for now. We can embed the HTML for the final, data-containing visualization by saving the value of <code>html_str</code>, the string that results from injecting our data into the Template.</li>
<li>We'll use <code>d3.forceSimulation()</code> to prevent the markers (representing different friends) from overlapping.</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [0]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="kn">from</span> <span class="nn">string</span> <span class="kn">import</span> <span class="n">Template</span>
<span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s1">'''</span>
<span class="s1">&lt;svg width="960" height="700"&gt;&lt;/svg&gt;</span>

<span class="s1">&lt;script src="https://d3js.org/d3.v4.min.js"&gt;&lt;/script&gt;</span>
<span class="s1">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.24.0/d3-legend.min.js"&gt;&lt;/script&gt;</span>
<span class="s1">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.8.0-alpha.1/d3-tip.min.js"&gt;&lt;/script&gt;</span>
<span class="s1">&lt;link rel="stylesheet" href="https://rawgithub.com/Caged/d3-tip/master/examples/example-styles.css"&gt;</span>
<span class="s1">&lt;script&gt;</span>
<span class="s1">var titles = $titles;</span>
<span class="s1">var seasons = $seasons;</span>
<span class="s1">var ids = $ids;</span>
<span class="s1">var users = $users;</span>
<span class="s1">var data = $data;</span>

<span class="s1">var season_colors = {</span>
<span class="s1">  'Fall 2016': 'red',</span>
<span class="s1">  'Winter 2017': 'blue',</span>
<span class="s1">  'Spring 2017': 'green',</span>
<span class="s1">  'Summer 2017': 'orange'</span>
<span class="s1">};</span>

<span class="s1">var svg = d3.select("svg"),</span>
<span class="s1">    margin = {top: 70, right: 20, bottom: 170, left: 170},</span>
<span class="s1">    width = +svg.attr("width") - margin.left - margin.right,</span>
<span class="s1">    height = +svg.attr("height") - margin.top - margin.bottom;</span>

<span class="s1">var x = d3.scalePoint().rangeRound([0, width]).padding(0.5).domain(titles),</span>
<span class="s1">    y = d3.scaleLinear().rangeRound([height, 0]).domain([0, 10]),</span>
<span class="s1">    c = d3.scaleOrdinal(d3.schemeCategory10).domain(users);</span>

<span class="s1">data.forEach(function(d) {</span>
<span class="s1">    d['x'] = x(d.title);</span>
<span class="s1">    d['y'] = y(d.score);</span>
<span class="s1">});</span>

<span class="s1">var tip = d3.tip()</span>
<span class="s1">    .attr("class", "d3-tip")</span>
<span class="s1">    .attr("background", "white")</span>
<span class="s1">    .html(function(d) {</span>
<span class="s1">        return "&lt;p&gt;" + d.title + "&lt;/p&gt;&lt;p&gt;Rated " + d.score + "/10 by "+ d.user + "&lt;/p&gt;";</span>
<span class="s1">    });</span>
<span class="s1">    svg.call(tip);</span>

<span class="s1">var g = svg.append("g")</span>
<span class="s1">    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");</span>

<span class="s1">g.append("g")</span>
<span class="s1">    .attr("class", "axis axis-x")</span>
<span class="s1">    .attr("transform", "translate(0," + height + ")")</span>
<span class="s1">    .call(d3.axisBottom(x))</span>
<span class="s1">  .selectAll("text")	</span>
<span class="s1">    .style("text-anchor", "end")</span>
<span class="s1">    .attr("dx", "-.8em")</span>
<span class="s1">    .attr("dy", ".15em")</span>
<span class="s1">    .attr("transform", "rotate(-45)")</span>
<span class="s1">    .attr("fill", function(d, i) { return season_colors[seasons[i]] })</span>
<span class="s1">    .on('dblclick', function(d, i) { return window.open('https://myanimelist.net/anime/' + ids[i], '_blank'); });</span>

<span class="s1">g.append("g")</span>
<span class="s1">    .attr("class", "axis axis-y")</span>
<span class="s1">    .call(d3.axisLeft(y).ticks(10));</span>

<span class="s1">function make_x_gridlines() {		</span>
<span class="s1">    return d3.axisBottom(x)</span>
<span class="s1">        .ticks()</span>
<span class="s1">}</span>

<span class="s1">function make_y_gridlines() {		</span>
<span class="s1">    return d3.axisLeft(y)</span>
<span class="s1">        .ticks()</span>
<span class="s1">}</span>

<span class="s1">g.append("g")			</span>
<span class="s1">    .attr("class", "grid")</span>
<span class="s1">    .attr("transform", "translate(0," + height + ")")</span>
<span class="s1">    .attr("stroke-opacity", 0.2)</span>
<span class="s1">    .call(make_x_gridlines()</span>
<span class="s1">        .tickSize(-height)</span>
<span class="s1">        .tickFormat("")</span>
<span class="s1">    )</span>

<span class="s1">dots = g.selectAll(".dot")</span>
<span class="s1">  .data(data)</span>
<span class="s1">  .enter().append("circle")</span>
<span class="s1">    .attr("class", "dot")</span>
<span class="s1">    .attr("cx", function(d) { return d.x; })</span>
<span class="s1">    .attr("cy", function(d) { return d.y; })</span>
<span class="s1">    .attr("r", function(d) { return d.watched })</span>
<span class="s1">    .attr("fill", function(d) {return c(d.user) })</span>
<span class="s1">    .attr("stroke", "black")</span>
<span class="s1">    .on('dblclick', function(d) { return window.open('https://myanimelist.net/anime/' + d.id, '_blank'); })</span>
<span class="s1">    .on('mouseover', tip.show)</span>
<span class="s1">    .on('mouseout', tip.hide);</span>

<span class="s1">var simulation = d3.forceSimulation(data)</span>
<span class="s1">    .velocityDecay(0.9)</span>
<span class="s1">    .force("collide", d3.forceCollide().radius(function(d) { return d.watched; }).iterations(2))</span>
<span class="s1">    .on("tick", function() { dots.attr("cx", function(d) { return d.x; }).attr("cy", function(d) { return d.y; }) });</span>

<span class="s1">// set up legend</span>
<span class="s1">// step 1: create a group for all legend-related elements</span>
<span class="s1">var legendGroup = svg.append("g")</span>
<span class="s1">    .attr("class", "legendOrdinal")</span>
<span class="s1">    .attr("transform", "translate(20,20)");</span>
<span class="s1">// step 2: first thing (lowest in z-order) to add is a rectangle to outline the legend with</span>
<span class="s1">// we will fill in its size later</span>
<span class="s1">var legendBox = legendGroup.append("rect")</span>
<span class="s1">    .attr("class", "legend-box")</span>
<span class="s1">    .attr("fill", "white")</span>
<span class="s1">    .attr("stroke", "black");</span>
<span class="s1">// step 3: invoke d3-legend to create the legend</span>
<span class="s1">var legendOrdinal = d3.legendColor()</span>
<span class="s1">    .shape("path", d3.symbol().type(d3.symbolCircle).size(150)())</span>
<span class="s1">    .shapePadding(10)</span>
<span class="s1">    .scale(c);</span>
<span class="s1">var legend = svg.select(".legendOrdinal")</span>
<span class="s1">    .call(legendOrdinal);</span>
<span class="s1">// step 4: select the legend cells - we will do something with them</span>
<span class="s1">var legendCells = legendGroup.selectAll('.cell');</span>
<span class="s1">// step 4b: figure out what size to make the legendBox by iterating over the legendCells</span>
<span class="s1">var maxWidth = 0;</span>
<span class="s1">var totalHeight = 0;</span>
<span class="s1">legendCells.each(function(d) {</span>
<span class="s1">    var bbox = d3.select(this).node().getBBox();</span>
<span class="s1">    maxWidth = bbox.width &gt; maxWidth ? bbox.width : maxWidth;</span>
<span class="s1">    totalHeight += bbox.height + 10;</span>
<span class="s1">});</span>
<span class="s1">legendBox.attr("width", maxWidth + 15)</span>
<span class="s1">    .attr("height", totalHeight)</span>
<span class="s1">    .attr("transform", "translate(-15,-15)");</span>
<span class="s1">&lt;/script&gt;</span>
<span class="s1">'''</span><span class="p">)</span>
<span class="n">html_str</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">substitute</span><span class="p">({</span><span class="s1">'titles'</span><span class="p">:</span> <span class="n">titles</span><span class="p">,</span> <span class="s1">'data'</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="s1">'seasons'</span><span class="p">:</span> <span class="n">seasons</span><span class="p">,</span> <span class="s1">'ids'</span><span class="p">:</span> <span class="n">ids</span><span class="p">,</span> <span class="s1">'users'</span><span class="p">:</span> <span class="n">users</span><span class="p">})</span>
<span class="n">HTML</span><span class="p">(</span><span class="n">html_str</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[0]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">

<svg width="960" height="700"></svg><script src="https://d3js.org/d3.v4.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.24.0/d3-legend.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.8.0-alpha.1/d3-tip.min.js"></script><link rel="stylesheet" href="https://rawgithub.com/Caged/d3-tip/master/examples/example-styles.css">
<script>
var titles = ['Yuri!!! on Ice', 'Haikyuu!!: Karasuno Koukou VS Shiratorizawa Gakuen Koukou', 'Shelter', 'Fate/Grand Order: First Order', 'Masamune-kun no Revenge', 'Kizumonogatari III: Reiketsu-hen', 'Little Witch Academia (TV)', 'Kobayashi-san Chi no Maid Dragon', 'Kono Subarashii Sekai ni Shukufuku wo! 2', 'Kuzu no Honkai', 'Sword Art Online Movie: Ordinal Scale', 'Boku no Hero Academia 2nd Season', 'Shingeki no Kyojin Season 2', 'Rokudenashi Majutsu Koushi to Akashic Records', 'Tsuki ga Kirei', 'Berserk 2nd Season', 'Saenai Heroine no Sodatekata \xe2\x99\xad', 'Shokugeki no Souma: Ni no Sara OVA', 'Kakegurui', 'Fate/Apocrypha', 'Aho Girl', 'Made in Abyss', 'Ballroom e Youkoso', 'Youkoso Jitsuryoku Shijou Shugi no Kyoushitsu e (TV)', 'Gamers!', 'Owarimonogatari 2nd Season'];
var seasons = ['Fall 2016', 'Fall 2016', 'Fall 2016', 'Fall 2016', 'Winter 2017', 'Winter 2017', 'Winter 2017', 'Winter 2017', 'Winter 2017', 'Winter 2017', 'Winter 2017', 'Spring 2017', 'Spring 2017', 'Spring 2017', 'Spring 2017', 'Spring 2017', 'Spring 2017', 'Spring 2017', 'Summer 2017', 'Summer 2017', 'Summer 2017', 'Summer 2017', 'Summer 2017', 'Summer 2017', 'Summer 2017', 'Summer 2017'];
var ids = [32995, 32935, 34240, 34321, 33487, 31758, 33489, 33206, 32937, 32949, 31765, 33486, 25777, 32951, 34822, 34055, 30727, 34480, 34933, 34662, 34881, 34599, 34636, 35507, 34280, 35247];
var users = ['thelolpatrol', 'gilgi', 'POOPOO88', 'lingybear'];
var data = [{'id': 32995, 'watched': 7.0, 'score': 8.0, 'user': 'thelolpatrol', 'title': 'Yuri!!! on Ice'}, {'id': 32995, 'watched': 7.0, 'score': 8.0, 'user': 'gilgi', 'title': 'Yuri!!! on Ice'}, {'id': 32995, 'watched': 7.0, 'score': 8.0, 'user': 'POOPOO88', 'title': 'Yuri!!! on Ice'}, {'id': 32935, 'watched': 7.0, 'score': 9.0, 'user': 'POOPOO88', 'title': 'Haikyuu!!: Karasuno Koukou VS Shiratorizawa Gakuen Koukou'}, {'id': 32935, 'watched': 7.0, 'score': 7.0, 'user': 'lingybear', 'title': 'Haikyuu!!: Karasuno Koukou VS Shiratorizawa Gakuen Koukou'}, {'id': 34240, 'watched': 7.0, 'score': 7.0, 'user': 'POOPOO88', 'title': 'Shelter'}, {'id': 34321, 'watched': 7.0, 'score': 6.0, 'user': 'POOPOO88', 'title': 'Fate/Grand Order: First Order'}, {'id': 33487, 'watched': 7.0, 'score': 6.0, 'user': 'POOPOO88', 'title': 'Masamune-kun no Revenge'}, {'id': 31758, 'watched': 7.0, 'score': 9.0, 'user': 'POOPOO88', 'title': 'Kizumonogatari III: Reiketsu-hen'}, {'id': 33489, 'watched': 2.2400000000000002, 'score': 7.0, 'user': 'gilgi', 'title': 'Little Witch Academia (TV)'}, {'id': 33489, 'watched': 3.6400000000000001, 'score': 6.0, 'user': 'lingybear', 'title': 'Little Witch Academia (TV)'}, {'id': 33206, 'watched': 7.0, 'score': 9.0, 'user': 'thelolpatrol', 'title': 'Kobayashi-san Chi no Maid Dragon'}, {'id': 33206, 'watched': 1.6153846153846154, 'score': 7.0, 'user': 'gilgi', 'title': 'Kobayashi-san Chi no Maid Dragon'}, {'id': 33206, 'watched': 1.0769230769230769, 'score': 7.0, 'user': 'lingybear', 'title': 'Kobayashi-san Chi no Maid Dragon'}, {'id': 32937, 'watched': 7.0, 'score': 8.0, 'user': 'POOPOO88', 'title': 'Kono Subarashii Sekai ni Shukufuku wo! 2'}, {'id': 32949, 'watched': 7.0, 'score': 7.0, 'user': 'POOPOO88', 'title': 'Kuzu no Honkai'}, {'id': 31765, 'watched': 7.0, 'score': 5.0, 'user': 'POOPOO88', 'title': 'Sword Art Online Movie: Ordinal Scale'}, {'id': 33486, 'watched': 7.0, 'score': 9.0, 'user': 'POOPOO88', 'title': 'Boku no Hero Academia 2nd Season'}, {'id': 25777, 'watched': 7.0, 'score': 7.0, 'user': 'gilgi', 'title': 'Shingeki no Kyojin Season 2'}, {'id': 25777, 'watched': 7.0, 'score': 9.0, 'user': 'POOPOO88', 'title': 'Shingeki no Kyojin Season 2'}, {'id': 25777, 'watched': 7.0, 'score': 7.0, 'user': 'lingybear', 'title': 'Shingeki no Kyojin Season 2'}, {'id': 32951, 'watched': 7.0, 'score': 5.0, 'user': 'POOPOO88', 'title': 'Rokudenashi Majutsu Koushi to Akashic Records'}, {'id': 34822, 'watched': 1.75, 'score': 6.0, 'user': 'gilgi', 'title': 'Tsuki ga Kirei'}, {'id': 34822, 'watched': 7.0, 'score': 10.0, 'user': 'POOPOO88', 'title': 'Tsuki ga Kirei'}, {'id': 34822, 'watched': 7.0, 'score': 8.0, 'user': 'lingybear', 'title': 'Tsuki ga Kirei'}, {'id': 34055, 'watched': 7.0, 'score': 9.0, 'user': 'thelolpatrol', 'title': 'Berserk 2nd Season'}, {'id': 30727, 'watched': 7.0, 'score': 7.0, 'user': 'POOPOO88', 'title': 'Saenai Heroine no Sodatekata \xe2\x99\xad'}, {'id': 34480, 'watched': 7.0, 'score': 8.0, 'user': 'lingybear', 'title': 'Shokugeki no Souma: Ni no Sara OVA'}, {'id': 34933, 'watched': 7.0, 'score': 6.0, 'user': 'POOPOO88', 'title': 'Kakegurui'}, {'id': 34662, 'watched': 4.2000000000000002, 'score': 7.0, 'user': 'gilgi', 'title': 'Fate/Apocrypha'}, {'id': 34881, 'watched': 7.0, 'score': 5.0, 'user': 'POOPOO88', 'title': 'Aho Girl'}, {'id': 34599, 'watched': 7.0, 'score': 9.0, 'user': 'thelolpatrol', 'title': 'Made in Abyss'}, {'id': 34599, 'watched': 7.0, 'score': 9.0, 'user': 'POOPOO88', 'title': 'Made in Abyss'}, {'id': 34636, 'watched': 2.9166666666666665, 'score': 7.0, 'user': 'gilgi', 'title': 'Ballroom e Youkoso'}, {'id': 34636, 'watched': 2.0416666666666665, 'score': 7.0, 'user': 'lingybear', 'title': 'Ballroom e Youkoso'}, {'id': 35507, 'watched': 4.666666666666667, 'score': 5.0, 'user': 'gilgi', 'title': 'Youkoso Jitsuryoku Shijou Shugi no Kyoushitsu e (TV)'}, {'id': 35507, 'watched': 7.0, 'score': 6.0, 'user': 'POOPOO88', 'title': 'Youkoso Jitsuryoku Shijou Shugi no Kyoushitsu e (TV)'}, {'id': 35507, 'watched': 4.083333333333333, 'score': 7.0, 'user': 'lingybear', 'title': 'Youkoso Jitsuryoku Shijou Shugi no Kyoushitsu e (TV)'}, {'id': 34280, 'watched': 3.5, 'score': 6.0, 'user': 'lingybear', 'title': 'Gamers!'}, {'id': 35247, 'watched': 7.0, 'score': 9.0, 'user': 'POOPOO88', 'title': 'Owarimonogatari 2nd Season'}];

var season_colors = {
  'Fall 2016': 'red',
  'Winter 2017': 'blue',
  'Spring 2017': 'green',
  'Summer 2017': 'orange'
};

var svg = d3.select("svg"),
    margin = {top: 70, right: 20, bottom: 170, left: 170},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom;

var x = d3.scalePoint().rangeRound([0, width]).padding(0.5).domain(titles),
    y = d3.scaleLinear().rangeRound([height, 0]).domain([0, 10]),
    c = d3.scaleOrdinal(d3.schemeCategory10).domain(users);

data.forEach(function(d) {
    d['x'] = x(d.title);
    d['y'] = y(d.score);
});

var tip = d3.tip()
    .attr("class", "d3-tip")
    .attr("background", "white")
    .html(function(d) {
        return "<p>" + d.title + "</p><p>Rated " + d.score + "/10 by "+ d.user + "</p>";
    });
    svg.call(tip);

var g = svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

g.append("g")
    .attr("class", "axis axis-x")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x))
  .selectAll("text")	
    .style("text-anchor", "end")
    .attr("dx", "-.8em")
    .attr("dy", ".15em")
    .attr("transform", "rotate(-45)")
    .attr("fill", function(d, i) { return season_colors[seasons[i]] })
    .on('dblclick', function(d, i) { return window.open('https://myanimelist.net/anime/' + ids[i], '_blank'); });

g.append("g")
    .attr("class", "axis axis-y")
    .call(d3.axisLeft(y).ticks(10));

function make_x_gridlines() {		
    return d3.axisBottom(x)
        .ticks()
}

function make_y_gridlines() {		
    return d3.axisLeft(y)
        .ticks()
}

g.append("g")			
    .attr("class", "grid")
    .attr("transform", "translate(0," + height + ")")
    .attr("stroke-opacity", 0.2)
    .call(make_x_gridlines()
        .tickSize(-height)
        .tickFormat("")
    )

dots = g.selectAll(".dot")
  .data(data)
  .enter().append("circle")
    .attr("class", "dot")
    .attr("cx", function(d) { return d.x; })
    .attr("cy", function(d) { return d.y; })
    .attr("r", function(d) { return d.watched })
    .attr("fill", function(d) {return c(d.user) })
    .attr("stroke", "black")
    .on('dblclick', function(d) { return window.open('https://myanimelist.net/anime/' + d.id, '_blank'); })
    .on('mouseover', tip.show)
    .on('mouseout', tip.hide);

var simulation = d3.forceSimulation(data)
    .velocityDecay(0.9)
    .force("collide", d3.forceCollide().radius(function(d) { return d.watched; }).iterations(2))
    .on("tick", function() { dots.attr("cx", function(d) { return d.x; }).attr("cy", function(d) { return d.y; }) });

// set up legend
// step 1: create a group for all legend-related elements
var legendGroup = svg.append("g")
    .attr("class", "legendOrdinal")
    .attr("transform", "translate(20,20)");
// step 2: first thing (lowest in z-order) to add is a rectangle to outline the legend with
// we will fill in its size later
var legendBox = legendGroup.append("rect")
    .attr("class", "legend-box")
    .attr("fill", "white")
    .attr("stroke", "black");
// step 3: invoke d3-legend to create the legend
var legendOrdinal = d3.legendColor()
    .shape("path", d3.symbol().type(d3.symbolCircle).size(150)())
    .shapePadding(10)
    .scale(c);
var legend = svg.select(".legendOrdinal")
    .call(legendOrdinal);
// step 4: select the legend cells - we will do something with them
var legendCells = legendGroup.selectAll('.cell');
// step 4b: figure out what size to make the legendBox by iterating over the legendCells
var maxWidth = 0;
var totalHeight = 0;
legendCells.each(function(d) {
    var bbox = d3.select(this).node().getBBox();
    maxWidth = bbox.width > maxWidth ? bbox.width : maxWidth;
    totalHeight += bbox.height + 10;
});
legendBox.attr("width", maxWidth + 15)
    .attr("height", totalHeight)
    .attr("transform", "translate(-15,-15)");
</script>
</div>

</div>

</div>
</div>

</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/anime/" rel="tag">anime</a></li>
            <li><a class="tag p-category" href="../../categories/api/" rel="tag">API</a></li>
            <li><a class="tag p-category" href="../../categories/d3js/" rel="tag">D3.js</a></li>
            <li><a class="tag p-category" href="../../categories/notebook/" rel="tag">notebook</a></li>
            <li><a class="tag p-category" href="../../categories/python/" rel="tag">Python</a></li>
            <li><a class="tag p-category" href="../../categories/visualization/" rel="tag">visualization</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="next">
                <a href="../biochemical-kinetics-reaction-velocities/" rel="next" title="Fitting a Michaelis-Menten model to biochemical kinetics data">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="gilgi-blog",
            disqus_url="https://gilgi.org/blog/mal-hype-ladder/",
        disqus_title="MyAnimeList hype visualization with D3.js",
        disqus_identifier="cache/posts/mal_hype_ladder.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'left' if you want left-aligned equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script></article><script>var disqus_shortname="gilgi-blog";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><!--End of body content--><footer id="footer">
            Contents © 2019         <a href="mailto:site@gilgi.org">gilgi</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
